<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings xmlns="http://java.sun.com/xml/ns/persistence/orm"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                 xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm
                 http://java.sun.com/xml/ns/persistence/orm_2_0.xsd"
                 version="2.0">

    <!-- 조회수 기준 인기 비디오 조회 -->
    <named-query name="Video.findPopularVideos">
        <query>
            SELECT v FROM Video v 
            ORDER BY v.viewCount DESC
        </query>
    </named-query>

    <!-- 최근 게시된 비디오 조회 -->
    <named-query name="Video.findRecentVideos">
        <query>
            SELECT v FROM Video v 
            ORDER BY v.publishedAt DESC
        </query>
    </named-query>

    <!-- 특정 기간 내 게시된 비디오 조회 -->
    <named-query name="Video.findVideosByDateRange">
        <query>
            SELECT v FROM Video v 
            WHERE v.publishedAt BETWEEN :startDate AND :endDate 
            ORDER BY v.viewCount DESC
        </query>
    </named-query>

    <!-- 조회수 범위로 비디오 조회 -->
    <named-query name="Video.findByViewCountRange">
        <query>
            SELECT v FROM Video v 
            WHERE v.viewCount BETWEEN :minViews AND :maxViews 
            ORDER BY v.viewCount DESC
        </query>
    </named-query>

    <!-- 인기 비디오 (최근 30일, 조회수 기준) -->
    <named-query name="Video.findPopularVideosSince">
        <query>
            SELECT v FROM Video v 
            WHERE v.publishedAt &gt;= :date 
            ORDER BY v.viewCount DESC
        </query>
    </named-query>

</entity-mappings>
